I"<h3 id="内存布局与智能指针的引入">内存布局与智能指针的引入</h3>
<p>概括来说，Linux进程在内存空间中主要可分为堆、栈和静态存储区等。静态存储区用来保存局部static对象、类static数据成员以及定义在任何函数之外的变量。栈内存用来保存定义在函数内的非static对象。分配在静态存储区和栈内存中的对象由编译器自动创建和销毁。堆内存用来存储程序运行时动态分配的对象，动态对象的生存期由程序来控制，因此很容易出现问题：如果忘记释放动态分配的内存，就会产生内存泄漏；如果在尚有指针引用的情况下释放了内存，就会产生空悬指针。</p>

<p>为了更容易也更安全地使用动态内存，C++11标准库提供了两种智能指针类型来管理动态对象，负责自动释放所使用的对象。’shared_ptr’允许多个指针指向同一个对象，unique_ptr则独占所指向的对象。此外，标准库还定义了一个名为weak_ptr的伴随类，它是一种弱引用，指向shared_ptr所管理的对象，用于解决循环引用问题。这三种类型都定义在memory头文件中。</p>
<h3 id="shared_ptr类">shared_ptr类</h3>
<h3 id="直接管理内存">直接管理内存</h3>
<h3 id="shared_ptr和new结合使用">shared_ptr和new结合使用</h3>
<h3 id="智能指针和异常">智能指针和异常</h3>
<h3 id="unique_ptr">unique_ptr</h3>
<h3 id="weak_ptr">weak_ptr</h3>

:ET